<!-- Author: Nguyễn Viết Hoàng Phúc 22/11/1997 -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nhập mã xác nhận</title>
<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<div class="container mt-5">
		<div class="row justify-content-center">
			<div class="col-md-6">
				<div class="card">
					<div class="card-header text-center">
						<h2>Nhập mã xác nhận</h2>
					</div>
					<div class="card-body">
						<p class="text-center">Vui lòng kiểm tra email của bạn để nhận
							mã xác nhận.</p>
						<form method="post" th:action="@{/register/verify}">
							<!-- Hidden field for email -->
							<input type="hidden" name="email" th:value="${email}" />
							<div class="mb-3">
								<label for="token" class="form-label">Mã xác nhận</label> <input
									type="text" name="code" class="form-control" id="token"
									placeholder="Nhập mã xác nhận" required>
								<div style="color: red;" th:if="${codeError != null}"
									th:text="${codeError}"></div>
							</div>
							<!-- Submit button -->
							<button type="submit" class="btn btn-primary w-100">Xác
								nhận</button>
						</form>
						<!-- Resend code button -->
						<div class="text-center mt-3">
							<form method="post" th:action="@{/resendCode}">
								<!-- Hidden field for email -->
								<input type="hidden" name="email" th:value="${email}" />
								<button id="resendButton" class="btn btn-secondary" disabled>Gửi
									lại mã (60s)</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		// Function to enable the "Resend Code" button after 60 seconds
		document.addEventListener("DOMContentLoaded", function() {
			var resendButton = document.getElementById("resendButton");
			var timeLeft = 60;

			// Update button text every second
			var countdown = setInterval(
					function() {
						if (timeLeft > 0) {
							resendButton.textContent = "Gửi lại mã ("
									+ timeLeft + "s)";
							timeLeft--;
						} else {
							clearInterval(countdown);
							resendButton.textContent = "Gửi lại mã";
							resendButton.disabled = false;
						}
					}, 1000);
		});
	</script>
</body>
</html>
