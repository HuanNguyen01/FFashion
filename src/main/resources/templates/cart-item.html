<!-- Author: Nguyen Cong Huan. 06/03/1999 -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/fragment/head :: head}">
</head>
<body>
	<div th:replace="~{/fragment/navigation :: navigation}"></div>
	<div class="container">

		<h2 style="color: red">Giỏ hàng</h2>
		<div class="alert alert-info">
			<strong>Số sản phẩm đã chọn: <span id="selected-count">0</span></strong>
		</div>
		<div class="rows">
			<div class="col-sm-9">
				<table class="table">
					<thead>
						<tr style="background: aqua">
							<th><input type="checkbox" id="selectAll"> Chọn tất
								cả</th>
							<th>Hình ảnh</th>
							<th>Tên</th>
							<th>Giá</th>
							<th>Số lượng</th>
							<th>Thành tiền</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="item : ${cartItems}">
							<td><input type="checkbox" class="product-checkbox"
								th:attr="data-id=${item.productID}"></td>
							<td><img th:src="@{/img/vay.jpg}" width="50" height="50" /></td>
							<td th:text="${item.name}"></td>
							<td th:text="${item.price}" th:attr="data-price=${item.price}"></td>
							<td>
								<form th:action="@{/shopping-cart/update}" method="post"
									style="display: inline;">
									<input type="hidden" name="id" th:value="${item.productID}" />
									<input type="hidden" name="quantity"
										th:value="${item.quantity - 1}" />
									<button type="submit" class="btn btn-danger btn-sm">-</button>
								</form> <input type="number" name="quantity"
								th:value="${item.quantity}" th:attr="data-id=${item.productID}"
								style="width: 50px; text-align: center;" min="1" readonly>
								<form th:action="@{/shopping-cart/update}" method="post"
									style="display: inline;">
									<input type="hidden" name="id" th:value="${item.productID}" />
									<input type="hidden" name="quantity"
										th:value="${item.quantity + 1}" />
									<button type="submit" class="btn btn-success btn-sm">+</button>
								</form>

							</td>
							<td class="item-total" th:text="${item.price * item.quantity}"
								th:attr="data-total=${item.price * item.quantity}"></td>
							<td><a class="btn btn-sm btn-danger"
								th:href="@{/shopping-cart/delete/{id}(id=${item.productID})}">Xoá</a>
							</td>
						</tr>
					</tbody>
				</table>
				<p>

					Tổng tiền: <span id="cart-total">0</span>
				</p>
				<hr />
				 <!-- Form để gửi thông tin giỏ hàng -->
                <form id="cart-form" th:action="@{/payment}" method="post">
                    <input type="hidden" name="cartItems" id="cart-items">
                    <button type="submit" class="btn btn-primary btn-sm">Thanh toán</button>
                </form>
			</div>
		</div>
	</div>
	<div th:replace="~{/fragment/footer :: footer}"></div>
	<script th:inline="javascript" th:src="@{/js/cart-item.js}">
		
	</script>
</body>
</html>